CONTIKI_PROJECT = specksense
all: $(CONTIKI_PROJECT)

PROJECT_SOURCEFILES += kmeans.c
CONTIKI = ../..
CFLAGS += -DPROJECT_CONF_H=\"project-conf.h\"
include $(CONTIKI)/Makefile.include
CFLAGS+=-I$(CONTIKI)
CFLAGS+=-DPROCESS_ID=1
CFLAGS+=-DRUN_LENGTH=500 #400	#Mega 800 x 4000 500
CFLAGS+=-DNUM_RECORDS=1
CFLAGS+=-DWITH_BOOST_CPU
CFLAGS+=-DRADIO_CHANNEL=26 #26 13 15 11 perhaps 17
CFLAGS+=-DTIME_WINDOW=1000 #1000
CFLAGS+=-DDEBUG_RSSI=0
CFLAGS+=-DCHANNEL_METRIC=1
CFLAGS+=-DPROFILING=1


CFLAGS+=-DJ_D=1  #Jamming detection




#Threholds
CFLAGS+=-DINTERFERENCE_POWER_LEVEL_THRESHOLD=16
CFLAGS+=-DINTERFERENCE_DURATION_PROACTIVE=900
CFLAGS+=-DINTERFERENCE_DURATION_MID_MIN=500	#Decrease the number to cover wider area!
CFLAGS+=-DINTERFERENCE_DURATION_MID_MAX=900
CFLAGS+=-DINTERFERENCE_DURATION_RANDOM=150
CFLAGS+=-DINTERFERENCE_NUMBER_SAMPLES=5
CFLAGS+=-DINTERFERENCE_DURATION_SFD_MIN=15
CFLAGS+=-DINTERFERENCE_DURATION_SFD_MAX=30
CFLAGS+=-DEUCLIDEAN_DISTANCE_WEIGHT=5000
CFLAGS+=-DOLD_INTERFERENCE_BT_BURST_SIZE=0
CFLAGS+=-DOLD_INTERFERENCE_BT_POWER_LEVEL=0
CFLAGS+=-DOLD_INTERFERENCE_BT_SIZE_MARGIN=0
CFLAGS+=-DOLD_INTERFERENCE_BT_PL_MARGIN=0
CFLAGS+=-DOLD_INTERFERENCE_WIFI_BURST_SIZE=0
CFLAGS+=-DOLD_INTERFERENCE_WIFI_POWER_LEVEL=0
CFLAGS+=-DOLD_INTERFERENCE_WIFI_SIZE_MARGIN=0
CFLAGS+=-DOLD_INTERFERENCE_WIFI_PL_MARGIN=0
CFLAGS+=-DDEBUG_MODE=0


SRC_FILES += \
  $(SDK_ROOT)/components/libraries/uart/app_uart \
SRC_FILES += \
  $(SDK_ROOT)/components/libraries/uart \
SRC_FILES += \
  $(SDK_ROOT)/components/libraries/uart/app_uart_fifo.c \

#CUSTOM_RULE_LINK=1
#%.$(TARGET): %.co $(PROJECT_OBJECTFILES) $(PROJECT_LIBRARIES) contiki-$(TARGET).a
#	$(LD) $(LDFLAGS) $(TARGET_STARTFILES) ${filter-out %.a,$^} ${filter %.a,$^} $(TARGET_LIBFILES) -o $@ -lm
